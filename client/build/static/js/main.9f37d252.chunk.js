(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{186:function(e,a,t){e.exports=t(201)},194:function(e,a,t){},201:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),r=t(169),c=t.n(r),s=(t(193),t(194),t(11)),m=t(213),o=t(218),i=t(182),u=t(212),d=t(215),E=t(216),p=t(219),g=t(220),v=t(221),b=t(222),y=t(223);var N=()=>n.a.createElement("div",{className:"bg-dark text-light p-4"},n.a.createElement("h6",{className:"text-center"},"@Expense Tracker. All rights reserved")),h=t(89);var f=()=>{const[e,a]=Object(l.useState)(null),[t,r]=Object(l.useState)(!0),c=Object(s.q)();Object(l.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user"));e&&a(e),r(!1)},[]);return t?null:n.a.createElement("nav",{className:"navbar navbar-expand-lg bg-light"},n.a.createElement("div",{className:"container-fluid"},n.a.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarTogglerDemo01","aria-controls":"navbarTogglerDemo01","aria-expanded":"false","aria-label":"Toggle navigation"},n.a.createElement("span",{className:"navbar-toggler-icon"})),n.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo01"},n.a.createElement(h.b,{className:"navbar-brand",to:"/"},"Expense Management"),n.a.createElement("ul",{className:"navbar-nav ms-auto mb-2 mb-lg-0"},n.a.createElement("li",{className:"nav-item"},n.a.createElement("p",{className:"nav-link"},null===e||void 0===e?void 0:e.name)),n.a.createElement("li",{className:"nav-item"},n.a.createElement("button",{className:"btn btn-primary",onClick:()=>{localStorage.removeItem("user"),o.a.success("Logout Successfully"),c("/login")}},"Logout"))))))};var x=e=>{let{children:a}=e;return n.a.createElement(n.a.Fragment,null,n.a.createElement(f,null),n.a.createElement("div",{className:"content"},a),n.a.createElement(N,null))},O=t(214);var S=()=>n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"d-flex justify-content-center"},n.a.createElement("div",{className:"spinner-border",role:"status"},n.a.createElement("span",{className:"visually-hidden"},"Loading...")))),w=t(172),I=t.n(w),j=t(217);const C=["salary","tip","project","food","movie","bills","medical","fee","tax"];var F=e=>{let{allTransaction:a}=e;if(!a||!Array.isArray(a))return n.a.createElement("div",null,"Loading or invalid data...");const t=a.length,l=a.filter(e=>"income"===e.type),r=a.filter(e=>"expense"===e.type),c=l.length/t*100,s=r.length/t*100,m=a.reduce((e,a)=>e+a.amount,0),o=l.reduce((e,a)=>e+a.amount,0),i=r.reduce((e,a)=>e+a.amount,0),u=o/m*100,d=i/m*100;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row m-3"},n.a.createElement("div",{className:"col-md-4"},n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-header"},"Total Transactions: ",t),n.a.createElement("div",{className:"card-body"},n.a.createElement("h5",{className:"text-success"},"Income: ",l.length),n.a.createElement("h5",{className:"text-danger"},"Expense: ",r.length)),n.a.createElement("div",null,n.a.createElement(j.a,{type:"circle",strokeColor:"green",className:"mx-2",percent:c.toFixed(0)}),n.a.createElement(j.a,{type:"circle",strokeColor:"red",className:"mx-2",percent:s.toFixed(0)})))),n.a.createElement("div",{className:"col-md-4"},n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-header"},"Total Turnover: ",m),n.a.createElement("div",{className:"card-body"},n.a.createElement("h5",{className:"text-success"},"Income: ",o),n.a.createElement("h5",{className:"text-danger"},"Expense: ",i)),n.a.createElement("div",null,n.a.createElement(j.a,{type:"circle",strokeColor:"green",className:"mx-2",percent:u.toFixed(0)}),n.a.createElement(j.a,{type:"circle",strokeColor:"red",className:"mx-2",percent:d.toFixed(0)}))))),n.a.createElement("div",{className:"row mt-3"},n.a.createElement("div",{className:"col-md-4"},n.a.createElement("h4",null,"Category-wise Income"),C.map(e=>{const t=a.filter(a=>"income"===a.type&&a.category===e).reduce((e,a)=>e+a.amount,0);return t>0&&n.a.createElement("div",{className:"card",key:e},n.a.createElement("div",{className:"card-body"},n.a.createElement("h5",null,e),n.a.createElement(j.a,{percent:(t/o*100).toFixed(0)})))})),n.a.createElement("div",{className:"col-md-4"},n.a.createElement("h4",null,"Category-wise Expense"),C.map(e=>{const t=a.filter(a=>"expense"===a.type&&a.category===e).reduce((e,a)=>e+a.amount,0);return t>0&&n.a.createElement("div",{className:"card",key:e},n.a.createElement("div",{className:"card-body"},n.a.createElement("h5",null,e),n.a.createElement(j.a,{percent:(t/i*100).toFixed(0)})))}))))};const{RangePicker:T}=m.a;var k=()=>{const[e,a]=Object(l.useState)(!1),[t,r]=Object(l.useState)(!1),[c,s]=Object(l.useState)([]),[m,N]=Object(l.useState)("7"),[h,f]=Object(l.useState)([]),[w,j]=Object(l.useState)("all"),[C,k]=Object(l.useState)("table"),[P,A]=Object(l.useState)(null),L=[{title:"Date",dataIndex:"date",render:e=>n.a.createElement("span",null,I()(e).format("YYYY-MM-DD"))},{title:"Amount",dataIndex:"amount"},{title:"Type",dataIndex:"type"},{title:"Category",dataIndex:"category"},{title:"Reference",dataIndex:"reference"},{title:"Actions",render:(e,t)=>n.a.createElement("div",null,n.a.createElement(g.a,{onClick:()=>{A(t),a(!0)}}),n.a.createElement(v.a,{className:"mx-2",onClick:()=>{D(t)}}))}];Object(l.useEffect)(()=>{(async()=>{try{const a=JSON.parse(localStorage.getItem("user"));r(!0);const t=await O.a.post("/api/v1/transactions/get-transaction",{userid:a._id,frequency:m,selectedDate:h,type:w});r(!1),s(Array.isArray(t.data)?t.data:[])}catch(e){console.log(e),o.a.error("Fetch Issue With Transaction")}})()},[m,h,w]);const D=async e=>{try{r(!0),await O.a.post("/api/v1/transactions/delete-transaction",{transactionId:e._id}),r(!1),o.a.success("Transaction Deleted")}catch(a){r(!1),console.log(a),o.a.error("unable to delete")}};return n.a.createElement(x,null,t&&n.a.createElement(S,null),n.a.createElement("div",{className:"filters"},n.a.createElement("div",null,n.a.createElement("h6",null,"Select Frequency"),n.a.createElement(i.a,{value:m,onChange:e=>N(e)},n.a.createElement(i.a.Option,{value:"7"},"Last 1 Week"),n.a.createElement(i.a.Option,{value:"30"},"Last 1 Month"),n.a.createElement(i.a.Option,{value:"365"},"Last 1 Year"),n.a.createElement(i.a.Option,{value:"custom"},"Custom")),"custom"===m&&n.a.createElement(T,{value:h,onChange:e=>f(e)})),n.a.createElement("div",null,n.a.createElement("h6",null,"Select Type"),n.a.createElement(i.a,{value:w,onChange:e=>j(e)},n.a.createElement(i.a.Option,{value:"all"},"All"),n.a.createElement(i.a.Option,{value:"income"},"Income"),n.a.createElement(i.a.Option,{value:"expense"},"Expense"))),n.a.createElement("div",{className:"switch-icon"},n.a.createElement(b.a,{className:`mx-2 ${"table"===C?"active-icon":"inactive-icon"}`,onClick:()=>k("table")}),n.a.createElement(y.a,{className:`mx-2 ${"analytics"===C?"active-icon":"inactive-icon"}`,onClick:()=>k("analytics")})),n.a.createElement("div",null,n.a.createElement("button",{className:"btn btn-primary",onClick:()=>a(!0)},"Add New"))),n.a.createElement("div",{className:"content"},"table"===C?n.a.createElement(u.a,{columns:L,dataSource:c,rowKey:"_id"}):n.a.createElement(F,{allTransaction:c})),n.a.createElement(d.a,{title:P?"Edit Transaction":"Add Transaction",open:e,onCancel:()=>{a(!1),A(null)},footer:!1},n.a.createElement(E.a,{layout:"vertical",onFinish:async e=>{try{const l=JSON.parse(localStorage.getItem("user"));r(!0),P?(await O.a.post("/api/v1/transactions/edit-transaction",{payload:{...e,userId:l._id},transactionId:P._id}),o.a.success("Transaction Updated Successfully")):(await O.a.post("/api/v1/transactions/add-transaction",{...e,userid:l._id}),o.a.success("Transaction Added Successfully")),r(!1),a(!1),A(null)}catch(t){r(!1),o.a.error("Failed to add transaction")}},initialValues:P},n.a.createElement(E.a.Item,{label:"Amount",name:"amount"},n.a.createElement(p.a,{type:"text"})),n.a.createElement(E.a.Item,{label:"Type",name:"type"},n.a.createElement(i.a,null,n.a.createElement(i.a.Option,{value:"income"},"Income"),n.a.createElement(i.a.Option,{value:"expense"},"Expense"))),n.a.createElement(E.a.Item,{label:"Category",name:"category"},n.a.createElement(i.a,null,n.a.createElement(i.a.Option,{value:"salary"},"Salary"),n.a.createElement(i.a.Option,{value:"tip"},"Tip"),n.a.createElement(i.a.Option,{value:"project"},"Project"),n.a.createElement(i.a.Option,{value:"food"},"Food"),n.a.createElement(i.a.Option,{value:"movie"},"Movie"),n.a.createElement(i.a.Option,{value:"bills"},"Bills"),n.a.createElement(i.a.Option,{value:"medical"},"Medical"),n.a.createElement(i.a.Option,{value:"fee"},"Fee"),n.a.createElement(i.a.Option,{value:"tax"},"Tax"))),n.a.createElement(E.a.Item,{label:"Date",name:"date"},n.a.createElement(p.a,{type:"date"})),n.a.createElement(E.a.Item,{label:"Reference",name:"reference"},n.a.createElement(p.a,{type:"text"})),n.a.createElement(E.a.Item,{label:"Description",name:"description"},n.a.createElement(p.a,{type:"text"})),n.a.createElement("div",{className:"d-flex justify-content-end"},n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Save")))))};var P=()=>{const[e,a]=Object(l.useState)(!1),t=Object(s.q)();return Object(l.useEffect)(()=>{localStorage.getItem("user")&&t("/")},[t]),n.a.createElement("div",{className:"register-page"},e&&n.a.createElement(S,null),n.a.createElement(E.a,{layout:"vertical",onFinish:async e=>{try{a(!0);const{data:n}=await O.a.post("/api/v1/users/login",e);a(!1),o.a.success("Login successful!"),localStorage.setItem("user",JSON.stringify({...n.user,password:void 0})),t("/")}catch(l){a(!1),o.a.error("Something went wrong. Please try again.")}}},n.a.createElement("h1",null,"Login Form"),n.a.createElement(E.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please enter your email!"},{type:"email",message:"Enter a valid email!"}]},n.a.createElement(p.a,{type:"email"})),n.a.createElement(E.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please enter your password!"}]},n.a.createElement(p.a.Password,null)),n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement(h.b,{to:"/register"},"Not a user? Click here to register"),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Login"))))};var A=()=>{const e=Object(s.q)(),[a,t]=Object(l.useState)(!1);return Object(l.useEffect)(()=>{localStorage.getItem("user")&&e("/")},[e]),n.a.createElement("div",{className:"register-page"},a&&n.a.createElement(S,null),n.a.createElement(E.a,{layout:"vertical",onFinish:async a=>{try{t(!0),await O.a.post("/api/v1/users/register",a),o.a.success("Registration Successful"),t(!1),e("/login")}catch(l){t(!1),o.a.error("Something went wrong. Please try again.")}}},n.a.createElement("h1",null,"Register Form"),n.a.createElement(E.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter your name!"}]},n.a.createElement(p.a,null)),n.a.createElement(E.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please enter your email!"},{type:"email",message:"Enter a valid email!"}]},n.a.createElement(p.a,{type:"email"})),n.a.createElement(E.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please enter your password!"},{min:6,message:"Password must be at least 6 characters long!"}]},n.a.createElement(p.a.Password,null)),n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement(h.b,{to:"/login"},"Already registered? Click here to login"),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Register"))))};function L(e){let{user:a,children:t}=e;return a?t:n.a.createElement(s.a,{to:"/login"})}var D=function(){const[e,a]=Object(l.useState)(!0),[t,r]=Object(l.useState)(null);return Object(l.useEffect)(()=>{const e=localStorage.getItem("user");e&&r(JSON.parse(e)),a(!1)},[]),e?null:n.a.createElement(n.a.Fragment,null,n.a.createElement(s.d,null,n.a.createElement(s.b,{path:"/",element:n.a.createElement(L,{user:t},n.a.createElement(k,null))}),n.a.createElement(s.b,{path:"/register",element:n.a.createElement(A,null)}),n.a.createElement(s.b,{path:"/login",element:n.a.createElement(P,null)})))};var q=e=>{e&&e instanceof Function&&t.e(3).then(t.bind(null,224)).then(a=>{let{getCLS:t,getFID:l,getFCP:n,getLCP:r,getTTFB:c}=a;t(e),l(e),n(e),r(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(h.a,null,n.a.createElement(D,null)))),q()}},[[186,1,2]]]);
//# sourceMappingURL=main.9f37d252.chunk.js.map